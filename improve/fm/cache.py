import json
import os.path as osp

import numpy as np

# data = { "google_robot_pick_horizontal_coke_can": [ [ 0.0123042, 0.0188823, -0.07153782, 0.09659156, 0.01125028, -0.00814998, 0.02161803, 0.01325893, -0.03416765, -0.09716938, 0.01062486, -0.01284948, 0.04088272, -0.04014574, -0.00186282, 0.05276356, -0.05611157, -0.02442258, -0.08089446, -0.01142974, -0.03692571, 0.01254518, -0.01793399, -0.01340097, -0.0538701, -0.06232787, -0.05457531, -0.0053047, -0.08921801, -0.03670548, -0.00242725, -0.02051601, 0.00377753, 0.03594379, 0.02351758, -0.0018705, -0.03563867, -0.01739858, 0.07121955, -0.03300472, 0.06001961, 0.02166589, 0.00276075, -0.06651757, -0.05263522, -0.01739816, 0.04029195, 0.06141316, -0.09448898, -0.02711405, 0.07425299, 0.04427894, 0.00436586, 0.03233955, 0.01266222, 0.02466387, 0.06112512, 0.10795835, -0.0272809, -0.00661327, -0.05031443, -0.03789428, 0.00086103, 0.07576559, 0.02963824, 0.03317775, -0.01242489, -0.01900855, 0.10129552, -0.0207903, -0.00792957, 0.0449679, -0.02471878, -0.05279638, 0.01813262, -0.027406, 0.01286359, 0.01661311, 0.06969908, 0.01016637, -0.07368024, 0.05218676, -0.07617919, -0.02601276, 0.02525257, 0.03789572, 0.05016429, -0.0091659, 0.00247839, 0.01050828, -0.01213704, -0.01203036, 0.0040852, 0.03986333, 0.00865721, -0.03836355, 0.01049746, -0.00795773, -0.0173853, -0.0779065, 0.02116896, -0.01121035, 0.01411229, 0.05441055, -0.02578412, 0.01773162, -0.01139807, 0.02091751, 0.01563647, -0.04021342, -0.06856944, 0.00724515, -0.01281513, -0.03376012, -0.06945323, 0.03482972, 0.07644805, 0.02805762, -0.08168565, -0.07020923, -0.0145207, 0.01114894, -0.02456947, -0.04754212, -0.05535788, 0.02048279, -0.00529159, 0.02710904, -0.06443509, 0.0014592, 0.03042589, 0.018399, 0.11053773, -0.07959431, 0.06696694, 0.05391896, -0.00463415, -0.09217928, -0.03374648, -0.02900689, 0.05409427, 0.00236852, -0.01740287, -0.01072624, 0.02549895, 0.00648521, 0.05215056, -0.01452409, 0.01866712, -0.05642932, -0.02365887, -0.01844051, -0.02913953, -0.01636639, 0.05708659, 0.03276965, -0.04727205, -0.0056609, -0.00183405, 0.05922019, 0.01693236, -0.01911, 0.02981451, 0.01451901, -0.03088671, -0.01910687, 0.02112774, 0.02279808, 0.0188216, 0.06385747, -0.0158855, 0.03365186, 0.0412856, 0.02596831, 0.02102877, -0.03830975, -0.02476951, 0.07682331, 0.02026362, 0.04625519, 0.0192457, -0.06907061, -0.05073746, -0.04460493, -0.14439867, -0.02305936, 0.02916751, -0.04420985, 0.01265666, 0.053339, 0.0041183, -0.00874337, -0.07977717, 0.01308934, -0.04361232, -0.03245277, 0.02847686, -0.00282215, -0.04863078, 0.08021294, 0.08085276, -0.04500599, -0.05101442, 0.03231005, 0.05276753, -0.08061613, 0.04834418, 0.02228302, 0.00921524, -0.00628173, 0.02634062, -0.0178395, 0.00421584, -0.05247491, -0.0574907, 0.071832, -0.03855194, -0.02823513, 0.04246365, 0.02234245, 0.05145255, 0.04389286, -0.00045373, -0.02442448, -0.0493461, 0.04865054, -0.03209314, 0.08836313, -0.02186221, 0.04998748, -0.00476863, 0.03081764, -0.03685729, -0.013956, 0.05722739, 0.04746597, 0.02511407, -0.04358232, -0.02966086, 0.04969439, -0.02066956, 0.06414503, -0.0290955, 0.02425496, -0.01998984, 0.06503087, 0.04841752, -0.01151916, -0.00990551, -0.05921212, -0.07439613, -0.08276772, 0.00755553, 0.00952898, -0.05987076, -0.00641631, 0.03895515, -0.0264638, 0.01160072, 0.01738606, 0.02165287, 0.02613332, 0.00737491, -0.01273333, 0.0863269, -0.02478649, -0.06981024, -0.08270659, 0.11297541, 0.02544446, -0.0110496, -0.02871219, -0.10836327, 0.00696215, -0.06943033, -0.03619065, -0.01224649, 0.03772865, 0.09387071, 0.03974192, -0.0208314, 0.0156349, -0.01834876, 0.01174442, -0.04531342, 0.03369558, -0.03243618, -0.05805474, 0.09431325, 0.03944478, 0.07414605, 0.04554587, 0.0082517, 0.00471155, -0.03107949, 0.01378108, 0.04730405, -0.00328907, 0.06430408, -0.04047896, 0.02162956, 0.02043361, -0.02757762, -0.02787382, -0.04755732, 0.0254613, 0.0091381, -0.06394076, -0.02182368, 0.00444378, -0.00327481, -0.01984722, 0.01181834, 0.07990298, 0.05435229, -0.03965919, 0.04364185, 0.02987068, 0.01143654, -0.03594529, -0.07840074, -0.05392499, 0.07147316, 0.0236095, 0.00987389, -0.01192349, 0.02754813, 0.08229028, 0.06821828, 0.00567798, 0.03805912, 0.02273597, -0.01194653, 0.00785465, -0.01676681, -0.00301708, -0.03289023, -0.06325798, -0.0383836, 0.04745905, -0.07710212, -0.01183326, 0.01424262, -0.02857014, -0.03111437, 0.02047542, -0.05782982, 0.00304175, -0.05337073, -0.02047273, -0.0414166, 0.05581924, -0.00024458, -0.06468529, 0.02778133, 0.03023053, -0.03721992, -0.00281447, 0.06365421, -0.07077462, -0.01562936, -0.07783675, -0.04207898, 0.02833582, -0.04334892, -0.02864382, -0.00953775, 0.05360313, 0.04672276, -0.02625553, 0.02372706, 0.02537894, 0.02755491, 0.04850707, 0.0044496, 0.0351207, 0.00446841, -0.00040033, -0.09223051, 0.06897037, -0.00747009, -0.05248736, 0.0165389, -0.00803657, -0.02389593, 0.0460369, 0.03552701, -0.01168916, 0.02939776, 0.01645607, 0.07309664, 0.01741385, 0.04940028, -0.07566866, 0.07157549, -0.00529001, 0.04196701, 0.01752244, -0.00777629, -0.06391831, 0.01213104, 0.02344572, 0.05741846, -0.01856198, 0.09548074, 0.04393019, -0.03104339, -0.0297904, 0.01960521, -0.03598421, 0.0045971, -0.04935999, -0.0671487, -0.06221345, -0.05501611, 0.0329343, 0.00758072, -0.00847747, 0.00419488, -0.00364309, 0.04808707, -0.02758153, 0.03943079, -0.03640833, 0.0351768, -0.0403522, 0.00917384, 0.01908709, 0.00027096, 0.03061507, 0.01260462, -0.18353082, 0.02416739, 0.00995526, 0.01510449, 0.03981013, -0.06061226, 0.00163624, -0.01817359, 0.03424023, 0.02209012, -0.06180129, 0.03791865, -0.04607473, 0.00275327, -0.01969089, 0.02072242, -0.03345179, -0.02244066, 0.01044587, 0.05230872, 0.01681027, -0.04031499, -0.01294168, 0.12713039, 0.03086498, -0.0201136, 0.01810066, -0.1059016, -0.00675528, -0.02792078, 0.06395777, -0.0476031, -0.01199105, -0.00904904, 0.0221085, -0.07521418, -0.06468752, -0.03525183, 0.05881161, 0.02314786, -0.03717678, -0.01833957, -0.01464258, 0.08754161, 0.07557268, -0.0408167, 0.02507402, 0.13233542, -0.0093876, 0.01104214, -0.0957007, 0.02258114, -0.04155008, 0.0475995, 0.02824605, 0.01242309, 0.00264367, -0.03784011, 0.01109291, 0.02589103, 0.07730345, 0.02345528, -0.08793953, 0.00726242, 0.03529424, 0.03054176, 0.00129934, -0.01730499, 0.02858275, -0.00171414, -0.07303067, 0.00999813, -0.02085012, -0.05500782, -0.0395375, -0.00315567, -0.02577452, 0.02071297, 0.02682614, -0.0147631, -0.03324874, ] ] }

# import json
# import os.path as osp
# with open(osp.join(osp.dirname(__file__),'cache.json'), 'w') as f:
# json.dump(data, f)


def load_task_embedding(task: str):
    """Loads the task embedding."""

    d = osp.dirname(__file__)
    path = osp.join(d, "cache.json")

    with open(path, "r") as f:
        data = json.load(f)
        return data[task]


def store_task_embedding(embedding: np.ndarray, *, task: str):
    """Stores the task embedding."""

    print(task)
    embedding = embedding.tolist()
    d = osp.dirname(__file__)
    path = osp.join(d, "cache.json")

    with open(path, "r") as f:
        data = json.load(f)

    data[task] = embedding
    with open(path, "w") as f:
        json.dump(data, f)
